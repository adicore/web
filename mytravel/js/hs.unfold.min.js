(function(d){d.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:"click",unfoldType:"simple",unfoldDuration:300,unfoldEasing:"linear",unfoldAnimationIn:"fadeIn",unfoldAnimationOut:"fadeOut",unfoldHideOnScroll:true,unfoldHideOnBlur:false,unfoldDelay:350,unfoldOpenedElement:"init",unfoldOverlay:false,afterOpen:function(g){},beforeClose:function(g){},afterClose:function(g){}},_pageCollection:d(),init:function(j,i){var h;if(!j||!j.length){return}h=this;var g;j.each(function(l,n){var o=d(n),k;if(o.data("HSUnfold")){return}k=i&&d.isPlainObject(i)?d.extend(true,{},h._baseConfig,i,o.data()):d.extend(true,{},h._baseConfig,o.data());switch(k.unfoldType){case"css-animation":o.data("HSUnfold",new b(o,k));break;case"jquery-slide":o.data("HSUnfold",new e(o,k));break;default:o.data("HSUnfold",new c(o,k))}h._pageCollection=h._pageCollection.add(o);h._bindEvents(o,k.unfoldEvent,k.unfoldDelay);var m=d(n).data("HSUnfold");g=d(m.target).find("input, textarea").length;if(d(m.target).find("[data-unfold-target]").length){o.addClass("target-of-invoker-has-unfolds")}});d(document).on("click touchstart","body",function(k){if(k.target.id===h._baseConfig.unfoldOpenedElement){return}if(d(k.target).closest("#"+h._baseConfig.unfoldOpenedElement).length){return}h._pageCollection.each(function(l,n){var m=window.innerWidth,o=Boolean(d(n).data("is-mobile-only"));if(!o){d(n).data("HSUnfold").hide()}else{if(o&&m<769){d(n).data("HSUnfold").hide()}}if(d(n).data("HSUnfold").config.unfoldOverlay){d(n).data("HSUnfold").config.unfoldDelay=setTimeout(function(){d("."+d(n).data("HSUnfold").config.unfoldOverlay.className).fadeOut(d(n).data("HSUnfold").config.unfoldOverlay.animationSpeed?d(n).data("HSUnfold").config.unfoldOverlay.animationSpeed:200)},d(n).data("HSUnfold").config.unfoldDelay)}d(n).data("HSUnfold").config.beforeClose.call(h.target,h.element)})});d(window).on("scroll.HSUnfold",function(){h._pageCollection.each(function(k,m){var l=d(m).data("HSUnfold");if(l.getOption("unfoldHideOnScroll")&&g===0){l.hide()}else{if(l.getOption("unfoldHideOnScroll")&&!(/iPhone|iPad|iPod/i.test(navigator.userAgent))){l.hide()}}})});d(window).on("resize.HSUnfold",function(){if(h._resizeTimeOutId){clearTimeout(h._resizeTimeOutId)}h._resizeTimeOutId=setTimeout(function(){h._pageCollection.each(function(k,m){var l=d(m).data("HSUnfold");l.smartPosition(l.target)})},50)});d(document).on("keydown.HSUnfold",function(k){if(d("body").hasClass("u-unfold-opened")){if(k.keyCode&&k.keyCode===38||k.keyCode&&k.keyCode===40){k.preventDefault()}if(k.keyCode&&k.keyCode===27){h._pageCollection.each(function(l,m){d(m).data("HSUnfold").hide()});d("body").removeClass("u-unfold-opened")}}});return j},_bindEvents:function(i,l,k){var j=this,h=d(i.data("unfold-target"));if(l==="hover"&&!a()){i.on("mouseenter.HSUnfold",function(){var n=d(this),o=n.data("HSUnfold");if(!o){return}if(o.unfoldTimeOut){clearTimeout(o.unfoldTimeOut)}o.show();d("body").addClass("u-unfold-opened")}).on("mouseleave.HSUnfold",function(){var n=d(this),o=n.data("HSUnfold");if(!o){return}o.unfoldTimeOut=setTimeout(function(){o.hide();d("body").removeClass("u-unfold-opened")},k)});if(h.length){h.on("mouseenter.HSUnfold",function(){var n=i.data("HSUnfold");if(n.unfoldTimeOut){clearTimeout(n.unfoldTimeOut)}n.show()}).on("mouseleave.HSUnfold",function(){var n=i.data("HSUnfold");n.unfoldTimeOut=setTimeout(function(){n.hide()},k)})}}else{i.on("click.HSUnfold",function(q){var n=d(this),o=d("[data-unfold-target].active:not(.target-of-invoker-has-unfolds)"),p=d("[data-unfold-target].active.target-of-invoker-has-unfolds");j._baseConfig.unfoldOpenedElement=n.data("HSUnfold").target[0].id;if(!n.data("HSUnfold")){return}if(!n.hasClass("target-of-invoker-has-unfolds")){if(o.length){o.data("HSUnfold").toggle()}}else{if(p.length){p.data("HSUnfold").toggle()}}n.data("HSUnfold").toggle();d("body").toggleClass("u-unfold-opened");q.stopPropagation();q.preventDefault()});if(Boolean(i.data("unfold-target-is-menu"))){var g=d(i.data("unfold-target")),m=g.children();m.on("click",function(){i.data("HSUnfold").toggle()})}}}};function a(){return"ontouchstart" in window}function f(h,g){var i=this;if(!h.length){return false}i.element=h;i.config=g;i.target=d(i.element.data("unfold-target"));i.allInvokers=d('[data-unfold-target="'+i.element.data("unfold-target")+'"]');i.toggle=function(){if(!i.target.length){return i}var k=i.element[0].dataset,j=k.unfoldOverlay?JSON.parse(k.unfoldOverlay):false;if(i.defaultState){if(k.unfoldOverlay){if(!d("."+j.className).length){d('<div class="'+j.className+'" style="background-color: '+j.background+'"></div>').prependTo("body")}if(d("."+j.className).length){d("."+j.className).fadeIn(j.animationSpeed?j.animationSpeed:200)}}i.show()}else{if(d("."+j.className).length){i.config.unfoldTimeOut=setTimeout(function(){d("."+j.className).fadeOut(j.animationSpeed?j.animationSpeed:200)},i.config.unfoldDelay)}i.hide()}return i};this.smartPosition=function(n){if(n.data("baseDirection")){n.css(n.data("baseDirection").direction,n.data("baseDirection").value)}n.removeClass("u-unfold--reverse-y");var l=d(window),k=getComputedStyle(n.get(0)),m=Math.abs(parseInt(k.left,10))<40?"left":"right",j=n.offset();if(m==="right"){if(!n.data("baseDirection")){n.data("baseDirection",{direction:"right",value:parseInt(k.right,10)})}if(j.left<0){n.css("right",(parseInt(n.css("right"),10)-(j.left-10))*-1)}}else{if(!n.data("baseDirection")){n.data("baseDirection",{direction:"left",value:parseInt(k.left,10)})}if(j.left+n.outerWidth()>l.width()){n.css("left",(parseInt(n.css("left"),10)-(j.left+n.outerWidth()+10-l.width())))}}if(j.top+n.outerHeight()-l.scrollTop()>l.height()){n.addClass("u-unfold--reverse-y")}};this.getOption=function(j){return this.config[j]?this.config[j]:null};return true}function c(h,g){if(!f.call(this,h,g)){return}Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}});this.target.addClass("u-unfold--simple");this.hide()}function b(i,h){if(!f.call(this,i,h)){return}var g=this;this.target.addClass("u-unfold--css-animation u-unfold--hidden").css("animation-duration",g.config.unfoldDuration+"ms");Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}});if(this.target.length){this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(j){if(g.target.hasClass(g.config.unfoldAnimationOut)){g.target.removeClass(g.config.unfoldAnimationOut).addClass("u-unfold--hidden");if(g.allInvokers.length){g.allInvokers.attr("aria-expanded","false")}g.config.afterClose.call(g.target,g.element)}if(g.target.hasClass(g.config.unfoldAnimationIn)){if(g.allInvokers.length){g.allInvokers.attr("aria-expanded","true")}g.config.afterOpen.call(g.target,g.element)}j.preventDefault();j.stopPropagation()})}}function e(h,g){if(!f.call(this,h,g)){return}this.target.addClass("u-unfold--jquery-slide u-unfold--hidden").hide();Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}})}c.prototype.show=function(){var g=d(this)[0].config.unfoldTarget;d('[data-unfold-target="'+g+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden");if(this.allInvokers.length){this.allInvokers.attr("aria-expanded","true")}this.config.afterOpen.call(this.target,this.element);return this};c.prototype.hide=function(){var g=d(this)[0].config.unfoldTarget;d('[data-unfold-target="'+g+'"]').removeClass("active");this.target.addClass("u-unfold--hidden");if(this.allInvokers.length){this.allInvokers.attr("aria-expanded","false")}this.config.afterClose.call(this.target,this.element);return this};b.prototype.show=function(){var g=this,h=d(g)[0].config.unfoldTarget;d('[data-unfold-target="'+h+'"]').addClass("active");g.smartPosition(g.target);g.target.removeClass("u-unfold--hidden").removeClass(g.config.unfoldAnimationOut);if(!g.config.unfoldOverlay){g.target.addClass(g.config.unfoldAnimationIn)}else{setTimeout(function(){g.target.addClass(g.config.unfoldAnimationIn)})}g.config.afterOpen.call(g.target,g.element)};b.prototype.hide=function(){var g=d(this)[0].config.unfoldTarget;d('[data-unfold-target="'+g+'"]').removeClass("active");this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)};e.prototype.show=function(){var g=this;var h=d(this)[0].config.unfoldTarget;d('[data-unfold-target="'+h+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden").stop().slideDown({duration:g.config.unfoldDuration,easing:g.config.unfoldEasing,complete:function(){g.config.afterOpen.call(g.target,g.element)}})};e.prototype.hide=function(){var g=this;var h=d(this)[0].config.unfoldTarget;d('[data-unfold-target="'+h+'"]').removeClass("active");this.target.slideUp({duration:g.config.unfoldDuration,easing:g.config.unfoldEasing,complete:function(){g.config.afterClose.call(g.target,g.element);g.target.addClass("u-unfold--hidden")}})}})(jQuery);
